SmartTag 智能标签助手 1.0

SmartTag 是一款针对 Obsidian 的插件，通过调用兼容 OpenAI 格式的 LLM 接口，自动为笔记生成智能标签，并将标签按照统一格式写入笔记的 YAML Frontmatter 中。插件内置领域标签选择功能和历史记录模块，旨在提升标签稳定性、支持个性化推荐，并为未来基于历史数据的深度分析与 AI Rag 应用提供数据基础。

---

## 一、主要功能

### 1. 自动标签生成

* **LLM 接口调用**

  利用 LLM（如 gpt-3.5-turbo）从当前笔记文本中提取 3-5 个核心标签。
* **严格要求输出 JSON 数组**

  插件通过优化 prompt 要求 LLM 返回纯 JSON 数组，并在接收后清除可能存在的代码块标记，确保解析干净。

### 2. 领域标签选择

* **弹窗下拉选择**

  每次生成标签时，将弹出一个领域标签选择对话框，供用户选择当前笔记所属领域。
* **默认预选上次使用的领域标签**

  提高操作便捷性，用户只需直接回车即可确认。

### 3. 标签写入与格式

* **统一写入 YAML**

  将标签写入笔记 YAML Frontmatter，格式如下：

  ```yaml
  tags:
    - 修行
    - 修行/六度万行
    - 修行/止观入门
  ```

  第一项为领域标签，后续项格式为 “领域标签/智能推荐标签”。

### 4. 历史记录模块

* **记录生成操作**

  每次生成后自动保存包含笔记路径、笔记标题、所选领域标签、LLM 推荐标签、生成时间和原始 LLM 响应的记录（JSON 格式）。
* **为标签稳定性与个性化推荐提供数据支持**

  系统可后续对历史记录进行统计，分析各领域中稳定标签的出现频率，以期在未来生成时优先推荐高频标签，减少重复或近义标签。

---

## 二、安装与构建

### 1. 下载与构建

1. 安装 [Node.js](https://nodejs.org/)（版本建议 ≥ 14）。
2. 在项目根目录中安装依赖：

   ```bash
   npm install
   ```
3. 使用 esbuild 进行编译（请确保已全局安装 esbuild 或在项目中正确配置）：

   ```bash
   npm run build
   ```

   这将生成编译后的 `main.js` 文件。

### 2. 安装到 Obsidian

1. 将整个插件文件夹复制到你 Obsidian Vault 下的 `.obsidian/plugins/smart-tag/` 目录中。
2. 打开 Obsidian → 设置 → 第三方插件，启用 SmartTag 插件。

---

## 三、使用说明

1. **触发命令**

   打开任意一篇笔记后，通过命令面板（Ctrl+P）运行 “生成智能标签” 命令。
2. **选择领域标签**

   弹出窗口中，将显示“可选领域标签”下拉列表（以及提示信息），默认选择为上次使用的领域标签。

   * 你可以直接按回车确认；也可以用鼠标或键盘上下键更改选择。
3. **标签生成与写入**

   插件调用 LLM 接口提取标签，对标签进行清洗和排序（参照历史记录），最终将标签写入笔记 YAML Frontmatter。
4. **历史记录**

   每次生成操作后，会自动追加一条记录到 `history.json` 文件（建议放在 Vault 内部目录，如 `smart-tag/history.json`），为后续分析和个性化推荐提供数据支持。

---

## 四、版本控制与发布

### 1. 版本说明

* 当前版本 **1.0.0** 为初始稳定版，包含：
  * LLM 自动标签生成功能
  * 领域标签选择弹窗（默认预选上次选择）
  * 标签写入 YAML 的统一输出（格式为 `领域标签` 及 `领域标签/智能推荐标签`）
  * 历史记录模块（记录生成操作，为未来稳定性和个性化推荐提供依据）

### 2. Git 与版本管理

* 本项目遵循语义化版本控制（Semantic Versioning）。
* 每次重大变更（不向后兼容时）更新主版本号；新增功能更新次版本号；Bug 修复更新 Patch。
* 建议每次修改后，使用清晰的提交信息，并在准备发布时使用 Git Tag 打标签，例如：
  ```bash
  git tag v1.0.0
  git push origin v1.0.0
  ```

---

## 五、未来功能扩展方向

* **标签稳定性与个性化推荐**

  基于累计的历史记录数据，对各领域稳定标签进行统计，未来在生成标签时自动调整推荐排序。
* **历史记录管理**

  添加查看、搜索或清理历史记录的界面，方便用户管理生成记录。
* **与 AI Rag 对接**

  利用历史记录数据构成原子知识库，为后续使用 AI Rag 系统（例如与 CherryStudio 配合）搭建数据基础，打造更智能的知识关联与问答系统。
* **扩展多分支开发**

  随着新功能的加入，计划引入开发分支、特性分支，以便进行模块化、渐进式的功能迭代。

---

## 六、贡献与开源许可

* **贡献说明**

  欢迎对本项目进行贡献，如修复 bug、增加功能、优化界面等。请参考 [CONTRIBUTING.md](https://chatgpt.com/g/g-p-67f63759d0788191b02eae1536c6ab8e-jin-hong-yu-zhi-neng-biao-qian-cha-jian/c/CONTRIBUTING.md) 文件以获取具体流程。
* **开源许可**

  本项目采用 [MIT License](https://chatgpt.com/g/g-p-67f63759d0788191b02eae1536c6ab8e-jin-hong-yu-zhi-neng-biao-qian-cha-jian/c/LICENSE)。

---

## 七、开发者联系方式

* 如有问题或建议，请通过 GitHub Issues 联系我，或者发送邮件到 [skyjin](mailto:your_email@example.com)1208@gmail.com。

---

## 总结

SmartTag 智能标签助手 1.0 是一款基于 LLM 生成笔记标签的 Obsidian 插件，具有领域标签选择、标签清洗、自动写入 YAML 和历史记录记录功能。通过持续的迭代与版本管理，未来版本将逐步引入更加智能的稳定性调整、个性化推荐及与 AI Rag 的深度对接。
